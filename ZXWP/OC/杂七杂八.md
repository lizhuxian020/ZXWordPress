# cancelPreviousPerformRequestsWithTarget
```c
- (void)touchesBegan:(NSSet<UITouch *> *)touches withEvent:(UIEvent *)event {
    NSLog(@"%s", __FUNCTION__);
    //只能配合带afterDelay的performSelector方法来使用, 在sad里调用dispatch_after是没用的, 本方法的机制是在performSelector在Selector调用之前cancel
    [NSObject cancelPreviousPerformRequestsWithTarget:self selector:@selector(sad) object:nil];
    
    [self performSelector:@selector(sad) withObject:nil afterDelay:5];
    
}

- (void)sad {
    NSLog(@"%s", __FUNCTION__);
}

```

#古老的写法
```c

// 获取安全区
#define VIEWSAFEAREAINSETS(view) ({UIEdgeInsets i; if(@available(iOS 11.0, *)) {i = view.safeAreaInsets;} else {i = UIEdgeInsetsZero;} i;})
 
#define XHISGIFTypeWithData(data)\
({\
BOOL result = NO;\
if(!data) result = NO;\
uint8_t c;\
[data getBytes:&c length:1];\
if(c == 0x47) result = YES;\
(result);\
})
 
#define XHISVideoTypeWithPath(path)\
({\
BOOL result = NO;\
if([path hasSuffix:@".mp4"])  result =  YES;\
(result);\
})
 
#define XHDataWithFileName(name)\
({\
NSData *data = nil;\
NSString *path = [[NSBundle mainBundle] pathForResource:name ofType:nil];\
if([[NSFileManager defaultManager] fileExistsAtPath:path]){\
    data = [NSData dataWithContentsOfFile:path];\
}\
(data);\

————————————————
版权声明：本文为CSDN博主「枫志应明」的原创文章，遵循CC 4.0 BY-SA版权协议，转载请附上原文出处链接及本声明。
原文链接：https://blog.csdn.net/wsyx768/java/article/details/102943300
```

2.用来写手势
```c
UIView * tagView = [myLjjTools createViewWithFrame:CGRectMake(SCREEN_WIDTH- W_In_375(70), 0, W_In_375(70), SCREEN_HEIGHT) andBgColor:nil];
[self.view addSubview:tagView];
[tagView addGestureRecognizer:({
    UITapGestureRecognizer *tap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(showToolMenuyyy)];
    tap;
})];
```
3.用来设置frame

```c
self.tabBar.frame = ({
    CGRect frame = self.tabBar.frame;
    CGFloat tabBarHeight = self.tabBarHeight;
    frame.size.height = tabBarHeight;
    frame.origin.y = self.view.frame.size.height - tabBarHeight;
    frame;
});
```

4.用来初始化视图
```c
self.numberLabel = ({
    UILabel *label = [[UILabel alloc] init];
    label.textAlignment = NSTextAlignmentCenter;
    label.layer.masksToBounds = YES;
    label;
});
[self.contentView addSubview:self.numberLabel];
```
其实意思很简单
```
/**
 *括号中将view赋值给tempView，括号外可以使用tempView执行各种操作
 *{} 包装代码
 *() 表示执行
 */
UIView *tempView = ({
    UIView *view = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 200, 200)];
    view.backgroundColor = UIColor.redColor;
    [self.view addSubview:view];
    view;
});
NSLog(@"%@",tempView);
```
————————————————
版权声明：本文为CSDN博主「枫志应明」的原创文章，遵循CC 4.0 BY-SA版权协议，转载请附上原文出处链接及本声明。
原文链接：https://blog.csdn.net/wsyx768/java/article/details/102943300

#宏的符号
##两个'#'
```c
#define kConnect(x,y) x##y
```
kConnect(123,456) 等价于 123456
##一个'#'
一个 # 号
表示加双引号
```
#define kToString(x) #x`
```
kToString(123) 等价于 "123"

显然，这个一个C字符串

要想变成OC的字符串

还需要改进一下:
```
#define kToString(x) @""#x
```
or
```
#define kToString(x) @#x
```

#用宏判断系统版本
```
#ifdef __IPHONE_10_3
  //iOS10 的新特性代码
#endif


#if __IPHONE_OS_VERSION_MAX_ALLOWED >= __IPHONE_10_3

  //系统版本大于iOS 10.3 的新特性代码
#endif
```